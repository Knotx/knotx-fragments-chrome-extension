<!--
  Copyright (C) 2019 Knot.x Project

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Knot.x Functional Test: Payments</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="http://cognifide.com/favicon.ico?v=2"/>
  <link href="https://bootswatch.com/4/simplex/bootstrap.min.css" rel="stylesheet"/>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div class="jumbotron">
        <h2>
          Hello Knot.x - a reactive integration framework!
        </h2>
        <p>
          This page combines dynamic data with a template. A template may consist of many
          independent
          fragments defining the data they require. Dynamic data may come from external web APIs,
          databases etc.
        </p>
        <p>
          <a class="btn btn-primary btn-large"
             href="https://github.com/Knotx/knotx">Learn more</a>
        </p>
      </div>
    </div>
  </div>
  <div class="row" style="margin-left: 10px">
    <!-- data-knotx-id="3b3aa963-0024-4027-9510-b7a083c26217" --><script data-knotx-debug="log" data-knotx-id="3b3aa963-0024-4027-9510-b7a083c26217" type="application/json">{"finishTime":1598265416462,"fragment":{"id":"3b3aa963-0024-4027-9510-b7a083c26217","type":"snippet","configuration":{"data-knotx-task":"user-task"},"body":"\n      <div>\n        <h2>User details</h2>\n        <p>Id: 3214232</p>\n        <p>Name: Redford</p>\n        <p>Surname: Cornborough</p>\n        <p>Email: rcornborough0@theatlantic.com</p>\n      </div>\n    ","payload":{"fetch-user-info":{"_request":{"type":"HTTP","source":"/service/mock/userInfo.json","metadata":{"headers":{}}},"_response":{"success":true,"metadata":{"statusCode":"200","headers":{"Content-Type":["application/json; charset=UTF-8"],"Transfer-Encoding":["chunked"],"Server":["Jetty(9.2.24.v20180105)"]}}},"_result":{"id":3214232,"first_name":"Redford","last_name":"Cornborough","email":"rcornborough0@theatlantic.com","gender":"Male","credit_card_type":"visa","credit_card_number":"3562444175055197","user_group":"premium"}}}},"graph":{"finished":1598265416271,"id":"029723c2-ee2b-4722-875c-98489435d343","label":"fetch-user-info","on":{"_success":{"finished":1598265416462,"id":"6d8abd96-6ef1-452f-8400-eb42c46ff421","label":"te-hbs","on":{},"operation":{"data":{"alias":"te-hbs","actionFactory":"knot","actionConfig":{"address":"knotx.knot.te.handlebars","deliveryOptions":{"sendTimeout":3000},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{},"transition":"_success"},"started":1598265416277,"status":"SUCCESS","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-user-info","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/userInfo.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-user-info","logs":{},"doActionLogs":[]},"transition":"_success"},"started":1598265416208,"status":"SUCCESS","subtasks":[],"type":"SINGLE"},"startTime":1598265416208,"status":"SUCCESS"}</script>
    <div>
      <h2>User details</h2>
      <p>Id: 3214232</p>
      <p>Name: Redford</p>
      <p>Surname: Cornborough</p>
      <p>Email: rcornborough0@theatlantic.com</p>
    </div>
    <!-- data-knotx-id="3b3aa963-0024-4027-9510-b7a083c26217" -->
  </div>
  <div class="row">
    <div class="row" style="margin-left: 10px">
      <!-- data-knotx-id="038ef1a1-8888-4fe6-8351-723a6bb0859a" --><script data-knotx-debug="log" data-knotx-id="038ef1a1-8888-4fe6-8351-723a6bb0859a" type="application/json">{"finishTime":1598265416582,"fragment":{"id":"038ef1a1-8888-4fe6-8351-723a6bb0859a","type":"snippet","configuration":{"data-knotx-task":"payments-task"},"body":"\n        <div>\n          <h2>Payment providers</h2>\n          <ul>\n                        <li>\n              <p>Payment provider: PayPal premium</p>\n              <p>Payment URL: https://paypal-example.com/payment?id=1983247919hv9sa398f</p>\n            </li>\n                        <li>\n              <p>Payment provider: PayU</p>\n              <p>Payment URL: https://payu-example.com/tr?id=afj08aw398gha0we9ge</p>\n            </li>\n                        <li>\n              <p>Payment provider: Credit Card</p>\n              <p>Payment URL: https://cc-example.com/pay/19g8esry9se8rgyse90r8ug4</p>\n            </li>\n                      </ul>\n        </div>\n      ","payload":{"fetch-user-info":{"_request":{"type":"HTTP","source":"/service/mock/userInfo.json","metadata":{"headers":{}}},"_response":{"success":true,"metadata":{"statusCode":"200","headers":{"Content-Type":["application/json; charset=UTF-8"],"Transfer-Encoding":["chunked"],"Server":["Jetty(9.2.24.v20180105)"]}}},"_result":{"id":3214232,"first_name":"Redford","last_name":"Cornborough","email":"rcornborough0@theatlantic.com","gender":"Male","credit_card_type":"visa","credit_card_number":"3562444175055197","user_group":"premium"}},"fetch-payment-providers":{"_request":{"type":"HTTP","source":"/service/mock/paymentProviders.json","metadata":{"headers":{}}},"_response":{"success":true,"metadata":{"statusCode":"200","headers":{"Content-Type":["application/json; charset=UTF-8"],"Transfer-Encoding":["chunked"],"Server":["Jetty(9.2.24.v20180105)"]}}},"_result":[{"verified":true,"paymentUrl":"https://paypal-example.com/payment?id=1983247919hv9sa398f","name":"PayPal premium"},{"verified":true,"paymentUrl":"https://payu-example.com/tr?id=afj08aw398gha0we9ge","name":"PayU"},{"verified":true,"paymentUrl":"https://cc-example.com/pay/19g8esry9se8rgyse90r8ug4","name":"Credit Card"}]},"fetch-offers":{"_result":{"fallback":"json-syntax-error"}},"fetch-delivery":{"_result":{"fallback":"action ended with _timeout"}}}},"graph":{"finished":1598265416262,"id":"cfbafcad-0bf6-49ab-b888-2e410dd342a0","label":"fetch-user-info","on":{"_success":{"finished":1598265416389,"id":"dd0d4743-b4c7-42e6-99d3-b22f330d9305","label":"composite","on":{"_success":{"finished":1598265416582,"id":"bd8bf36c-dc75-4c28-9125-987b4d7fa242","label":"te-pebble","on":{},"operation":{"data":{"alias":"te-pebble","actionFactory":"knot","actionConfig":{"address":"knotx.knot.te.pebble","deliveryOptions":{"sendTimeout":3000},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{},"transition":"_success"},"started":1598265416390,"status":"SUCCESS","subtasks":[],"type":"SINGLE"}},"operation":{"data":{},"factory":"subtasks"},"response":{"errors":[],"log":{},"transition":"_success"},"started":1598265416263,"status":"SUCCESS","subtasks":[{"finished":1598265416277,"id":"38a0b1ba-7a34-46c7-9060-558bbb0c88ff","label":"fetch-payment-providers","on":{"_error":{"finished":0,"id":"3d9875e7-7ce3-41f8-901a-501bf4934125","label":"fetch-payment-providers-fallback","on":{},"operation":{"data":{"alias":"fetch-payment-providers-fallback","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/placeholderFallback.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{},"started":0,"status":"UNPROCESSED","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-payment-providers","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/paymentProviders.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-payment-providers","logs":{},"doActionLogs":[]},"transition":"_success"},"started":1598265416265,"status":"SUCCESS","subtasks":[],"type":"SINGLE"},{"finished":1598265416292,"id":"a6c56a09-2688-4875-89e3-ad5e54022f17","label":"fetch-offers","on":{"_error":{"finished":1598265416294,"id":"161b708e-7f8f-4cf1-ae74-2af4a5356e98","label":"fetch-offers-fallback","on":{},"operation":{"data":{"alias":"fetch-offers-fallback","actionFactory":"inline-payload","actionConfig":{"alias":"fetch-offers","payload":{"_result":{"fallback":"json-syntax-error"}},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-offers-fallback","logs":{},"doActionLogs":[]},"transition":"_success"},"started":1598265416293,"status":"SUCCESS","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-offers","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/specialOffers.xml","port":58969},"responseOptions":{"forceJson":true,"predicates":[]},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-offers","logs":{"request":{"path":"/service/mock/specialOffers.xml","requestHeaders":{},"requestBody":""},"response":{"httpVersion":"HTTP_1_1","statusCode":"500","statusMessage":"Server Error","headers":{"Content-Type":["text/html; charset=ISO-8859-1"],"Cache-Control":["must-revalidate,no-cache,no-store"],"Content-Length":["2606"],"Connection":["close"],"Server":["Jetty(9.2.24.v20180105)"]},"trailers":{},"httpMethod":"GET","requestPath":"localhost:58969/service/mock/specialOffers.xml"},"errors":[{"className":"java.io.IOException","message":"The service responded with unsuccessful status code: 500"}]},"doActionLogs":[]},"transition":"_error"},"started":1598265416266,"status":"ERROR","subtasks":[],"type":"SINGLE"},{"finished":1598265416387,"id":"b8a491c3-a172-41e6-83ff-71507e7fc01d","label":"fetch-delivery-options-cb","on":{"_fallback":{"finished":1598265416388,"id":"80265702-3c38-4249-9be1-e91e72348b7d","label":"fetch-delivery-timeout","on":{},"operation":{"data":{"alias":"fetch-delivery-timeout","actionFactory":"inline-payload","actionConfig":{"alias":"fetch-delivery","payload":{"_result":{"fallback":"action ended with _timeout"}},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-delivery-timeout","logs":{},"doActionLogs":[]},"transition":"_success"},"started":1598265416388,"status":"SUCCESS","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-delivery-options-cb","actionFactory":"cb","actionConfig":{"circuitBreakerName":"delivery-cb","circuitBreakerOptions":{"maxRetries":1,"timeout":50},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-delivery-options-cb","logs":{"invocationCount":"2","error":"Exception: class io.vertx.circuitbreaker.TimeoutException. operation timeout"},"doActionLogs":[]},"transition":"_fallback"},"started":1598265416267,"status":"OTHER","subtasks":[],"type":"SINGLE"}],"type":"COMPOSITE"},"_custom":{"finished":0,"id":"c4b47860-67ea-42c8-8c51-ceff2386d5f0","label":"fetch-user-info-custom-fallback","on":{},"operation":{"data":{"alias":"fetch-user-info-custom-fallback","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/placeholderFallback.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{},"started":0,"status":"UNPROCESSED","subtasks":[],"type":"SINGLE"},"_error":{"finished":0,"id":"f339f13f-54de-4d62-932b-cc7a5c5272c0","label":"fetch-user-info-fallback","on":{"_success":{"finished":0,"id":"4f9e9d1d-dc77-47e9-a157-59bb1e469b75","label":"fetch-user-info-fallback-success","on":{},"operation":{"data":{"alias":"fetch-user-info-fallback-success","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/placeholderFallback.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{},"started":0,"status":"UNPROCESSED","subtasks":[],"type":"SINGLE"},"_error":{"finished":0,"id":"4d93b901-4d58-4d65-9565-57f1901fc1b9","label":"fetch-user-info-fallback-error","on":{},"operation":{"data":{"alias":"fetch-user-info-fallback-error","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/placeholderFallback.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{},"started":0,"status":"UNPROCESSED","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-user-info-fallback","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/placeholderFallback.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{},"started":0,"status":"UNPROCESSED","subtasks":[],"type":"SINGLE"}},"operation":{"data":{"alias":"fetch-user-info","actionFactory":"http","actionConfig":{"endpointOptions":{"allowedRequestHeaders":["Content-Type"],"domain":"localhost","path":"/service/mock/userInfo.json","port":58969},"logLevel":"error"}},"factory":"action"},"response":{"errors":[],"log":{"alias":"fetch-user-info","logs":{},"doActionLogs":[]},"transition":"_success"},"started":1598265416247,"status":"SUCCESS","subtasks":[],"type":"SINGLE"},"startTime":1598265416247,"status":"SUCCESS"}</script>
      <div>
        <h2>Payment providers</h2>
        <ul>
          <li>
            <p>Payment provider: PayPal premium</p>
            <p>Payment URL: https://paypal-example.com/payment?id=1983247919hv9sa398f</p>
          </li>
          <li>
            <p>Payment provider: PayU</p>
            <p>Payment URL: https://payu-example.com/tr?id=afj08aw398gha0we9ge</p>
          </li>
          <li>
            <p>Payment provider: Credit Card</p>
            <p>Payment URL: https://cc-example.com/pay/19g8esry9se8rgyse90r8ug4</p>
          </li>
        </ul>
      </div>
      <!-- data-knotx-id="038ef1a1-8888-4fe6-8351-723a6bb0859a" -->
    </div>
  </div>
</div>
</body>
</html>